<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Autosaveify demo</title>

  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">

  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.37/css/bootstrap-datetimepicker.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/select2-bootstrap-theme/0.1.0-beta.6/select2-bootstrap.min.css" rel="stylesheet">
  <link href="https://rawgit.com/michelson/Dante/v0.1.7/dist/css/dante-editor.css" rel="stylesheet">

  <link href="https://rawgit.com/Jaza/autosaveify/master/css/autosaveify.css" rel="stylesheet">
</head>

<body>

<div class="container">
  <div class="row">
    <div class="col-sm-12">


<h1>Autosaveify examples</h1>


<form id="fake-success-form">

  <h2>Fake server success?</h2>

  <div class="form-group">
    <div class="radio">
      <label>
        <input type="radio" name="fake_success" id="fake_success_disabled" value="disabled" checked>
        Let 'em fail
      </label>
    </div>

    <div class="radio">
      <label>
        <input type="radio" name="fake_success" id="fake_success_enabled" value="enabled">
        Fake it!
      </label>
    </div>
  </div>

</form>


<form id="simple-text-form" method="POST" class="form-inline" action="#" data-toggle="autosaveify" data-save-url="#">

  <h2>Addon icon</h2>

  <div class="form-group">
    <label for="simple_text" class="control-label autosaveify-hide-whenenabled">Simple text</label>

    <div class="input-group">
      <input class="form-control autosaveify-field" id="simple_text" name="simple_text" placeholder="Simple text" required type="text" value="">

      <span class="btn-default input-group-btn input-group-addon autosaveify-icon-wrapper autosaveify-show-tablecell-whenenabled" title="No changes to save"><span class="fa fa-save"></span></span>
    </div>
  </div>

  <div class="autosaveify-hide-whenenabled">
    <br />
    <button type="submit" class="btn btn-default">Update</button>
  </div>
</form>


<br />&nbsp;<br />


<form id="multiple-required-fields-form" method="POST" class="form-horizontal" action="#" data-toggle="autosaveify" data-save-url="#">

<div class="panel panel-default">

  <div class="panel-heading">
    <h2 class="panel-title autosaveify-saveicon-title">
      Title icon

      <div class="btn btn-sm btn-default input-group-btn autosaveify-icon-wrapper autosaveify-show-whenenabled" title="No changes to save"><span class="fa fa-save"></span></div>
    </h2>
  </div>

  <div class="panel-body">

    <div class="form-group required">
      <label class="control-label col-lg-4" for="required_field_1">Required Field 1</label>

      <div class=" col-lg-8">
        <input class="form-control autosaveify-field" id="required_field_1" name="required_field_1" required type="text" placeholder="Required Field 1" value="">
      </div>
    </div>

    <div class="form-group required">
      <label class="control-label col-lg-4" for="required_field_2">Required Field 2</label>
      <div class=" col-lg-8">
        <input class="form-control autosaveify-field" id="required_field_2" name="required_field_2" required type="text" placeholder="Required Field 2" value="">
      </div>
    </div>

    <div class="autosaveify-hide-whenenabled">
      <button type="submit" class="btn btn-default">Update</button>
    </div>

  </div><!-- /.panel-body -->
</div><!-- /.panel -->

</form>


<form id="status-box-form" method="POST" class="" action="#" data-toggle="autosaveify" data-save-url="#">

  <h2>Status box</h2>

  <div class="form-group">
    <label for="status_box" class="control-label autosaveify-hide-whenenabled">Status box</label>

    <input class="form-control autosaveify-field" id="status_box" name="status_box" placeholder="Status box" required type="text" value="">
  </div>

  <div class="autosaveify-hide-whenenabled">
    <button type="submit" class="btn btn-default">Update</button>
  </div>

  <div class="autosaveify-status-wrapper hidden"><p class="autosaveify-status alert alert-default"><span class="autosaveify-status-text">No changes to save</span><span class="fa fa-save"></span></p></div>
</form>


<form id="button-icon-form" method="POST" class="" action="#" data-toggle="autosaveify" data-save-url="#">

  <h2>Button icon</h2>

  <div class="form-group autosaveify-button-icon-wrapper">
    <label for="button_icon" class="control-label autosaveify-hide-whenenabled">Button icon</label>

    <div class="btn btn-sm btn-default input-group-btn autosaveify-icon-wrapper autosaveify-show-whenenabled" title="No changes to save"><span class="fa fa-save"></span></div>

    <input class="form-control autosaveify-field" id="button_icon" name="button_icon" placeholder="Button icon" required type="text" value="">
  </div>

  <div class="autosaveify-hide-whenenabled">
    <button type="submit" class="btn btn-default">Update</button>
  </div>
</form>


<h2>Form icon</h2>

<form id="form-icon-form" method="POST" action="#" class="autosaveify-button-icon-wrapper" data-toggle="autosaveify" data-save-url="#" data-hide-on-blur="1">

  <div class="row">
    <div class="col-sm-6">

  <div class="form-group required">
    <label class="control-label autosaveify-hide-whenenabled" for="form_icon_field_1">Form Icon Field 1</label>

    <input class="form-control autosaveify-field" id="form_icon_field_1" name="form_icon_field_1" required type="text" placeholder="Form Icon Field 1" value="">
  </div>

    </div><!-- /.col-sm-6 -->
    <div class="col-sm-6">

  <div class="form-group">
    <label class="control-label autosaveify-hide-whenenabled" for="form_icon_field_2">Form Icon Field 2</label>

    <input class="form-control autosaveify-field" id="form_icon_field_2" name="form_icon_field_2" type="text" placeholder="Form Icon Field 2" value="">
  </div>

    </div><!-- /.col-sm-6 -->
  </div><!-- /.row -->

  <div class="autosaveify-hide-whenenabled">
    <button type="submit" class="btn btn-default">Update</button>
  </div>

  <div class="btn btn-sm btn-default input-group-btn autosaveify-icon-wrapper hidden" title="No changes to save"><span class="fa fa-save"></span></div>

</form>


<h2>Date and time pickers</h2>

  <div class="row">

    <div class="col-sm-5 col-sm-offset-1">

<form id="date-picker-form" method="POST" class="form-horizontal" action="#" data-toggle="autosaveify" data-save-url="#">

  <div class="form-group">
    <label for="date_picker" class="control-label col-sm-4">Date picker</label>

    <div class="col-sm-8">
      <div class="input-group">
        <span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span>

        <input class="form-control autosaveify-field datepicker-enable" id="date_picker" name="date_picker" placeholder="Date picker" required type="text" value="">

        <span class="btn-default input-group-btn input-group-addon autosaveify-icon-wrapper autosaveify-show-tablecell-whenenabled" title="No changes to save"><span class="fa fa-save"></span></span>
      </div>
    </div>
  </div>

  <div class="autosaveify-hide-whenenabled">
    <button type="submit" class="btn btn-default">Update</button>
  </div>
</form>

    </div><!-- /.col-sm-5 -->

    <div class="col-sm-5 col-sm-padding-1">

<form id="time-picker-form" method="POST" class="form-horizontal" action="#" data-toggle="autosaveify" data-save-url="#">

  <div class="form-group">
    <label for="time_picker" class="control-label col-sm-4">Time picker</label>

    <div class="col-sm-8">
      <div class="input-group">
        <span class="input-group-addon"><span class="glyphicon glyphicon-time"></span></span>

        <input class="form-control autosaveify-field timepicker-enable" id="time_picker" name="time_picker" placeholder="Time picker" required type="text" value="">

        <span class="btn-default input-group-btn input-group-addon autosaveify-icon-wrapper autosaveify-show-tablecell-whenenabled" title="No changes to save"><span class="fa fa-save"></span></span>
      </div>
    </div>
  </div>

  <div class="autosaveify-hide-whenenabled">
    <button type="submit" class="btn btn-default">Update</button>
  </div>
</form>

    </div><!-- /.col-sm-5 -->

  </div><!-- /.row -->


<form id="textarea-form" method="POST" action="#" data-toggle="autosaveify" data-save-url="#">

  <h2>Text area</h2>

  <div class="form-group">
    <label for="text_area" class="control-label autosaveify-hide-whenenabled">Text area</label>

    <textarea class="form-control autosaveify-field" id="text_area" name="text_area" placeholder="Text area" required rows="10"></textarea>
  </div>

  <div class="autosaveify-hide-whenenabled">
    <button type="submit" class="btn btn-default">Update</button>
  </div>

  <div class="autosaveify-status-wrapper hidden"><p class="autosaveify-status alert alert-default"><span class="autosaveify-status-text">No changes to save</span><span class="fa fa-save"></span></p></div>
</form>


<h2>Checkbox and radio fields</h2>

<form id="checkbox-radio-form" method="POST" action="#" class="autosaveify-button-icon-wrapper" data-toggle="autosaveify" data-save-url="#">

  <div class="row">
    <div class="col-sm-6">

  <div class="form-group required">
    <div class="radio">
      <label>
        <input class="autosaveify-field" type="radio" name="radio_field" id="radio_option_1" value="option1" checked>
        Radio option 1
      </label>
    </div>

    <div class="radio">
      <label>
        <input class="autosaveify-field" type="radio" name="radio_field" id="radio_option_2" value="option2">
        Radio option 2
      </label>
    </div>
  </div>

    </div><!-- /.col-sm-6 -->
    <div class="col-sm-6">

  <div class="form-group">
    <div class="checkbox">
      <label>
        <input class="autosaveify-field" type="checkbox" name="checkbox_field_1" id="checkbox_field_1" value="">
        Checkbox option 1
      </label>
    </div>

    <div class="checkbox">
      <label>
        <input class="autosaveify-field" type="checkbox" name="checkbox_field_2" id="checkbox_field_2" value="">
        Checkbox option 2
      </label>
    </div>
  </div>

    </div><!-- /.col-sm-6 -->
  </div><!-- /.row -->

  <div class="autosaveify-hide-whenenabled">
    <button type="submit" class="btn btn-default">Update</button>
  </div>

  <div class="btn btn-sm btn-default input-group-btn autosaveify-icon-wrapper" title="No changes to save"><span class="fa fa-save"></span></div>

</form>


<h2>Select field</h2>

  <div class="row">
    <div class="col-sm-6">

<form id="select-form" method="POST" class="form-inline" action="#" data-toggle="autosaveify" data-save-url="#">

  <div class="form-group">
    <label for="select_field" class="control-label autosaveify-hide-whenenabled">Select field</label>

    <div class="input-group">
      <select class="form-control autosaveify-field" id="select_field" name="select_field" required>
        <option value=""></option>
        <option selected value="select_option_1">Select option 1</option>
        <option value="select_option_2">Select option 2</option>
      </select>

      <span class="btn-default input-group-btn input-group-addon autosaveify-icon-wrapper autosaveify-show-tablecell-whenenabled" title="No changes to save"><span class="fa fa-save"></span></span>
    </div>
  </div>

  <div class="autosaveify-hide-whenenabled">
    <br />
    <button type="submit" class="btn btn-default">Update</button>
  </div>
</form>

    </div><!-- /.col-sm-6 -->
    <div class="col-sm-6">

<form id="select2-form" method="POST" class="autosaveify-select2-wrapper" action="#" data-toggle="autosaveify" data-save-url="#">

  <div class="form-group">
    <label for="select2_field" class="control-label autosaveify-hide-whenenabled">Select2 field</label>

    <div class="input-group select2-bootstrap-append">
      <select class="form-control autosaveify-field select2-enable select2-multiple" id="select2_field" name="select2_field" required multiple>
        <option value=""></option>
        <option selected value="select2_option_1">Select2 option 1</option>
        <option value="select2_option_2">Select2 option 2</option>
      </select>

      <span class="btn-default input-group-btn input-group-addon autosaveify-icon-wrapper autosaveify-show-tablecell-whenenabled" title="No changes to save"><span class="fa fa-save"></span></span>
    </div>
  </div>

  <div class="autosaveify-hide-whenenabled">
    <button type="submit" class="btn btn-default">Update</button>
  </div>
</form>

    </div><!-- /.col-sm-6 -->
  </div><!-- /.row -->


<form id="dante-textarea-form" method="POST" class="" action="#" data-save-url="#">

  <h2>Dante Editor</h2>

  <div class="form-group">
    <label for="dante_textarea" class="control-label autosaveify-hide-whenenabled">Dante Editor</label>

    <textarea class="form-control autosaveify-field dante-enable" id="dante_textarea" name="dante_textarea" required rows="10">&lt;p&gt;Rich text here!&lt;/p&gt;</textarea>
  </div>

  <div class="autosaveify-hide-whenenabled">
    <button type="submit" class="btn btn-default">Update</button>
  </div>

  <div class="autosaveify-status-wrapper hidden"><p class="autosaveify-status alert alert-default"><span class="autosaveify-status-text">No changes to save</span><span class="fa fa-save"></span></p></div>
</form>


<br />&nbsp;<br />


    </div>
  </div>
</div><!-- /.container -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.14.1/moment.min.js"></script>
<script src="https://rawgit.com/gbirke/Sanitize.js/v1.0.0/lib/sanitize.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.37/js/bootstrap-datetimepicker.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>
<script src="https://rawgit.com/michelson/Dante/v0.1.7/dist/js/dante-editor.js"></script>

<script src="https://rawgit.com/Jaza/autosaveify/master/js/autosaveify.js"></script>


<!-- Autosaveify "Fake it!" toggle for demo -->
<script type="text/javascript">
(function($, window) {

  $('#fake-success-form input[name=fake_success]').change(function() {
    var $this = $(this);

    $('form.autosaveify-enabled').each(function(i) {
      $(this).data('autosaveify').options.fakeSuccess = (
        $this.val() === 'enabled');
    });
  });

}).call(this, jQuery, window);
</script>


<!-- Enable date and time pickers -->
<script type="text/javascript">
(function($, window) {

  $('.datepicker-enable').each(function() {
    var dpformat = $(this).attr('data-datepicker-format')
      ? $(this).attr('data-datepicker-format')
      : 'DD MMM YYYY';

    $(this).datetimepicker({
      format: dpformat});
  });

  $('.timepicker-enable').each(function() {
    var dpformat = $(this).attr('data-datepicker-format')
      ? $(this).attr('data-datepicker-format')
      : 'HH:mm';

    $(this).datetimepicker({
      format: dpformat});
  });

  $('.datepicker-enable, .timepicker-enable').on('dp.change', function(e) {
      $(this)
        .trigger('input');
    });

}).call(this, jQuery, window);
</script>


<!-- Enable Select2 widgets -->
<script type="text/javascript">
(function($, window) {

  $('.select2-enable').each(function() {
    $(this).select2({
      theme: 'bootstrap'});
  });

  $('.select2-enable').on('change', function(e) {
      $(this)
        .trigger('input');
    });

}).call(this, jQuery, window);
</script>


<!-- Enable Dante Editor instances -->
<script type="text/javascript">
(function($, window) {

  function updateDanteFromTextareas(event) {
    var ta = $(event.target);
    if (((event.type == 'keyup' || event.type == 'paste') && ta.is(':focus')) || event.type == 'blur') {
      var elem_jq = $('#' + ta.attr('id') + '-wysiwyg');
      elem_jq.html(ta.val());
    }
  }

  var elements = document.querySelectorAll('.dante-enable');

  $.each(elements, function(i, ta) {
    var ta_jq = $(ta);
    var ta_id = ta_jq.attr('id');
    var elem_id = ta_id + '-wysiwyg';

    ta_jq.after('<div id="' + elem_id + '" class="dante-editable" style="min-height: 34px"></div>');

    var elem_jq = ta_jq.siblings('#' + elem_id);
    var elem = elem_jq[0];

    if (ta_jq.val()) {
      elem_jq.html(ta_jq.val());
    }

    var dante_editor_options = {
      el: elem,
      upload_url: null,
      debug: false
    };

    var editor = new Dante.Editor(dante_editor_options);
    editor.start();

    $('body').on('input', elem_jq, function(event) {
      var c = editor.cleanContents(
        elem_jq.find('.section-inner')
          .clone());

      if (typeof c !== 'undefined') {
        c = c.html()
          .replace(/\<br\>\<\/p\>/g, '</p>')
          .replace(/ class=\"[^\"]+\"/g, '');

        ta_jq.val(c)
          .trigger('keyup');
      }
    });

    ta_jq.hide();
    $('body').on('blur keyup paste', ta_jq, updateDanteFromTextareas);
  });

}).call(this, jQuery, window);
</script>


<!-- Enable Autosaveify for specific forms -->
<script type="text/javascript">
(function($, window) {

    $('#dante-textarea-form').autosaveify();

}).call(this, jQuery, window);
</script>


</body>

</html>
